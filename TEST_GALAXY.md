# ğŸ§ª Galaxy Dashboard - Quick Test Guide

Follow these steps to test your new Galaxy Dashboard!

---

## âœ… Pre-requisites Checklist

Before testing, ensure these are running:

```bash
# Terminal 1: Redis
docker-compose up

# Terminal 2: Celery Worker
cd backend
source venv/bin/activate
celery -A app.workers.celery_app worker --loglevel=info

# Terminal 3: FastAPI Backend
cd backend
source venv/bin/activate
uvicorn main:app --reload

# Terminal 4: Next.js Frontend
cd frontend
npm install lucide-react  # First time only
npm run dev
```

---

## ğŸ¯ Step-by-Step Test

### Step 1: Ensure Pillars Exist

Go to your **Supabase SQL Editor** and run:

```sql
SELECT * FROM pillars;
```

If empty, run the script:
```bash
# Copy content from database/insert_pillars.sql and execute in Supabase
```

Or manually insert via API:
```bash
curl -X POST http://localhost:8000/api/v1/pillars \
  -H "Content-Type: application/json" \
  -d '{"name": "Operations", "description": "Operational improvements", "color": "#F59E0B"}'
```

---

### Step 2: Create Sample Notes

Open **http://localhost:3000** and create 5-10 notes with varied topics:

**Example Notes**:
1. "The parking lot is always full. We need more spaces."
2. "Can we get better coffee in the break room?"
3. "Our deployment process takes too long. We should automate it."
4. "Customer support response time is slow."
5. "We need better onboarding for new employees."
6. "The office AC is too cold in summer."
7. "Can we have flexible working hours?"
8. "Our project management tool is outdated."

**Why varied topics?** This creates different clusters based on similarity.

---

### Step 3: Wait for Processing

Watch the **Celery worker logs** (Terminal 2):

You should see:
```
âœ… Note processed successfully
âœ… Snapshot created for cluster
```

This takes ~5-10 seconds per note (OpenAI API calls).

---

### Step 4: Check Clusters in Supabase

Go to **Supabase Table Editor** â†’ `clusters`:

You should see multiple rows with:
- `title` (Generated by AI, e.g., "Parking and Facility Issues")
- `pillar_id` (Linked to a pillar)
- `note_count` (Number of similar notes)

---

### Step 5: Open the Galaxy Dashboard

Navigate to **http://localhost:3000/dashboard**

**What you should see**:
- ğŸŒŒ **Galaxy Chart**: Scatter plot with colored bubbles
- ğŸ“Š **Filter Bar**: Impact slider + Pillar dropdown
- ğŸ“‹ **Priority List**: Top 10 clusters on the right

---

### Step 6: Test Filters

#### A. Test Impact Filter
1. Move the **Impact Slider** to `5`
2. Chart updates â†’ Only clusters with score â‰¥ 5 remain
3. Priority list updates accordingly

#### B. Test Pillar Filter
1. Select **"Operations"** from dropdown
2. Chart shows only Operations clusters (amber color)
3. Other pillars disappear

#### C. Clear Filters
1. Click **"Clear All"** button
2. All clusters reappear

---

### Step 7: Verify Real-Time Updates

1. Keep the dashboard open
2. In another tab, create **2 new notes** at http://localhost:3000
3. Wait 30 seconds (auto-refresh interval)
4. Dashboard should update with new clusters

---

## ğŸ¨ Expected Visual Results

### Galaxy Chart
- **X-Axis**: Impact Score (0-10)
- **Y-Axis**: Note Volume (1+)
- **Bubble Size**: Larger = Higher impact
- **Colors**: 
  - ğŸŸ¢ Green = ESG
  - ğŸ”µ Blue = Innovation
  - ğŸŸ  Amber = Operations
  - ğŸŸ£ Purple = Finance/HR
  - ğŸ”· Cyan = Tech

### Priority List
- **Top cluster** = Highest impact score
- **Badge colors**:
  - ğŸ”´ Red = Critical (8-10)
  - ğŸŸ  Orange = High (6-8)
  - ğŸŸ¡ Yellow = Medium (4-6)
  - âšª Gray = Low (0-4)

---

## ğŸ› Troubleshooting

### Problem: Dashboard is blank

**Possible Causes**:
1. No clusters created yet
2. Backend API not running
3. CORS issues

**Solutions**:
```bash
# Check clusters in Supabase
SELECT COUNT(*) FROM clusters;

# Test API directly
curl http://localhost:8000/api/v1/board/galaxy

# Check backend logs (Terminal 3)
# Should see: âœ… Retrieved N clusters for Galaxy view
```

---

### Problem: "Failed to fetch galaxy data"

**Check**:
1. Backend API running on port 8000?
2. Frontend `lib/api.ts` has correct `baseURL`?

**Fix**:
```typescript
// frontend/lib/api.ts
export const api = {
  baseURL: "http://localhost:8000/api/v1",
  // ...
};
```

---

### Problem: Notes stuck in "Processing"

**Check Celery worker logs**:
- Look for errors (OpenAI API key, Supabase connection)
- Ensure Redis is running

**Restart worker**:
```bash
cd backend
celery -A app.workers.celery_app worker --loglevel=info
```

---

### Problem: npm install lucide-react fails

**Permission error?**
```bash
sudo chown -R $(whoami) ~/.npm
npm cache clean --force
cd frontend
npm install lucide-react
```

---

## âœ… Success Metrics

You've successfully tested the Galaxy Dashboard when:

- [ ] Dashboard loads without errors
- [ ] Galaxy Chart displays bubbles with colors
- [ ] Hovering shows cluster details in tooltip
- [ ] Impact slider filters clusters
- [ ] Pillar dropdown filters by category
- [ ] Priority list shows top 10 clusters
- [ ] Real-time refresh works (30s interval)
- [ ] Navigation bar switches between pages

---

## ğŸ“¸ Expected Screenshot

Your dashboard should look like:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒŒ Strategic Galaxy        [12 Active Clusters] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Filters:  [Impact: â•â•â—â•â•â•â•] [Pillar: All â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Impact Ã— Volume Matrix        â”‚  Top Priorities â”‚
â”‚                                â”‚                 â”‚
â”‚         â€¢  (ESG)               â”‚ 1. Parking...   â”‚
â”‚      â€¢     â€¢ (Ops)             â”‚ 2. Coffee...    â”‚
â”‚   â€¢  (Tech)                    â”‚ 3. Deploy...    â”‚
â”‚     â€¢                          â”‚ ...             â”‚
â”‚  â€¢                             â”‚                 â”‚
â”‚                                â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Next: Advanced Features

Once basic testing works, try:
1. Create 20+ notes to see clustering in action
2. Test with multiple users (different `user_id`)
3. Implement cluster detail view (click on bubble)
4. Add Time-Lapse slider (historical snapshots)

---

**Ready to test?** Start with Step 1! ğŸ¯

